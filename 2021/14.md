# 14 &ndash; They can't keep getting away with it...
This... this was the same trap as from [the lanternfish puzzle](06.md), and I fell for it again. The classic trap of having it look like you're manipulating a sequence of something, but ultimately you only care about the _counts_ of what's in the list. And then in Part 2, the sequence gets so big that you can't possibly keep it all in memory, so you _have_ to only keep the counts, not the full sequence.

it's a trick AoC has used before, but now they've used it twice in the same year (and barely a week apart) I'm starting to think that this might be setting up for a reversal in a future puzzle... where Part 1 looks like a sequence where you only need to keep track of counts, but if you do so then you'll be caught by Part 2 now _requiring_ you to maintain the full order, not just doing a count.

I suppose that does sorta describe puzzles like [day 2](02.md), where for the first part you can just pull out all the horizontal and vertical movements and add them up separately, but for part 2 you do need to go through them in order...

Anyway, for my solution I maintain a `Map` of the pairs of letters in the polymer, to the number of times they appear. Then, if a given step has `n` copies of `AC` and we have the production rule `AC -> B` then the next step would have `n` copies of `AB` and `n` copies of `BC`.

Then, to get the counts of the individual letters, just note that every letter is the first letter of a pair, except the very last letter of the polymer... so if we just count the pair counters against the first letter of their pair, we _almost_ get the right answer, but we'll have missed the final letter. To combat this, we add an extra sentinel character to the string, eg if the string is `ABABC`, then we record it as 2 copies of `AB`, one `BA`, one `BC`, and one `C$`. If we then take the first letter of each pair, we correctly get the counts as 2 `A`s, 2 `B`s and a `C`. And since `C$` doesn't match any of our production rules, it's left unchanged by the whole process.

Which does raise one extra note: the puzzle doesn't explicitly say what to do if there's a pair of letters in the polymer which doesn't have a production rule... the wording of the puzzle _implies_ that you should just leave it alone, not insert anything in between them... so that's what my code does (which was useful when I added the sentinel value). But it turns out not to matter &ndash; for my input at least, there are only 10 distinct letters, and there's a full 100 production rules, covering every combination.
