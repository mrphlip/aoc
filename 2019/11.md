# 11 &ndash; Paging Mr Langton
No major changes to the Intcode machine today, but I did take the opportunity to make utility functions inside the Intcode module for creating the machine state object, and extracting values from it... so now all the other modules can simply treat this as an opaque object, and in the future if I need to add more values to the state object I can just do that without having to edit all the previous puzzle solutions so they still compile. Which is something I should have done, like, 3 Intcode-related puzzles ago. But still.

Here, again, we get to benefit from Haskell's laziness to make the inputs of our machine a function of its own outputs. Since the outputs are a lazily-generated list, we can read values off the outputs and use them to generate new inputs, as long as we generate _enough_ inputs that the machine can run long enough to generate the outputs we need. We're told that the program reads an input, and then calculates two outputs, and this is indeed what it does... but if it ever tried to read a second input before generating those two outputs, then the laziness would break down as when it tried to get the next input, the input generator would be "sure, I can do that, just give me the next output" and then when it tried to get the next output, the output processor would go "sure, I can do that, just let me run the machine until I get another output opcode" and then the machine runner would go "sure, I can do that, just give me one more input". Not a good situation to be in. I believe that the program would crash here, but possibly it would infinite-loop, I don't have a good enough grasp of Haskell to be sure either way.

In the meantime, to store the state of the robot's wanderings, I made use of the expanding-array code I'd written for puzzle 9 &ndash; generalising it to work in two dimensions, and to work when expanding in any direction.

Other than that, the rest is pretty simple, we start with the array as entirely "unpainted", and paint it black and white as instructed by the Intcode outputs, get the final state of the area when the machine is done, and output it as needed.
